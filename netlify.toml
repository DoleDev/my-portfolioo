# File: netlify.toml
# ============================================
#    NETLIFY DEPLOYMENT CONFIGURATION
# ============================================
#
# This file tells Netlify how to build, serve, and
# configure your site. Netlify reads this automatically
# from your repository root.
#
# TOML syntax:
# - [section] defines a configuration section
# - [[array]] defines a repeated section (like redirect rules)
# - key = "value" for settings
# - # for comments
#
# Documentation: https://docs.netlify.com/configure-builds/file-based-configuration/
# ============================================


# ==========================================
# BUILD SETTINGS
# ==========================================
[build]
  # Publish directory â€” where the built site files are.
  # Since this is a static site (no build step), it's the root.
  publish = "."

  # No build command needed for a static HTML site.
  # If you later add a build tool (Hugo, 11ty, etc.),
  # you'd set the command here.
  # command = ""


# ==========================================
# CUSTOM HEADERS
# ==========================================
# Applied to all pages served by Netlify.
# These improve security, caching, and performance.

# ---- Security Headers (all pages) ----
[[headers]]
  for = "/*"
  [headers.values]
    # Prevent clickjacking â€” your site can't be embedded in iframes
    X-Frame-Options = "SAMEORIGIN"

    # Prevent MIME type sniffing â€” browser trusts declared content type
    X-Content-Type-Options = "nosniff"

    # Control referrer info sent with requests
    Referrer-Policy = "strict-origin-when-cross-origin"

    # Restrict browser features your site doesn't need
    Permissions-Policy = "camera=(), microphone=(), geolocation=(), interest-cohort=()"

    # Content Security Policy â€” controls what resources can load
    # ðŸ”§ CUSTOMIZE: If you add external scripts/fonts/images,
    #    you need to whitelist their domains here.
    Content-Security-Policy = "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://identity.netlify.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://*.netlify.com https://*.netlify.app; frame-src 'self' https://*.netlify.com;"

    # Strict Transport Security â€” force HTTPS for 1 year
    Strict-Transport-Security = "max-age=31536000; includeSubDomains; preload"


# ---- Caching for CSS files ----
[[headers]]
  for = "/css/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# ---- Caching for JavaScript files ----
[[headers]]
  for = "/js/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# ---- Caching for images ----
[[headers]]
  for = "/images/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# ---- Caching for fonts ----
[[headers]]
  for = "*.woff2"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# ---- Caching for JSON data (shorter cache â€” content changes more often) ----
[[headers]]
  for = "/data/*"
  [headers.values]
    Cache-Control = "public, max-age=3600, stale-while-revalidate=86400"

# ---- Service Worker â€” never cache the SW itself ----
[[headers]]
  for = "/sw.js"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"

# ---- Manifest â€” short cache ----
[[headers]]
  for = "/manifest.json"
  [headers.values]
    Cache-Control = "public, max-age=86400"


# ==========================================
# REDIRECTS & REWRITES
# ==========================================

# ---- Custom 404 page ----
# When a page isn't found, serve 404.html with a 404 status code.
[[redirects]]
  from = "/*"
  to = "/404.html"
  status = 404

# ---- Redirect www to non-www (if using custom domain) ----
# ðŸ”§ CUSTOMIZE: Uncomment and update if you have a custom domain
# [[redirects]]
#   from = "https://www.yourname.com/*"
#   to = "https://yourname.com/:splat"
#   status = 301
#   force = true


# ==========================================
# NETLIFY IDENTITY (for CMS)
# ==========================================
# Allow Identity widget to work on admin pages
[[headers]]
  for = "/admin/*"
  [headers.values]
    # Slightly relaxed CSP for admin panel (Decap CMS needs eval)
    Content-Security-Policy = "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://identity.netlify.com https://*.netlify.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com data:; img-src 'self' data: https: blob:; connect-src 'self' https://*.netlify.com https://*.netlify.app https://api.github.com; frame-src 'self' https://*.netlify.com;"


# ==========================================
# CONTEXT-SPECIFIC SETTINGS (optional)
# ==========================================
# Settings for deploy previews (branch deploys)
[context.deploy-preview]
  # You could add a robots noindex header here to prevent
  # preview deploys from being indexed by search engines
  [[context.deploy-preview.headers]]
    for = "/*"
    [context.deploy-preview.headers.values]
      X-Robots-Tag = "noindex, nofollow"
# File: netlify.toml
# ============================================
#    NETLIFY DEPLOYMENT CONFIGURATION
# ============================================
#
# This file tells Netlify how to build, serve, and
# configure your site. Netlify reads this automatically
# from your repository root.
#
# TOML syntax:
# - [section] defines a configuration section
# - [[array]] defines a repeated section (like redirect rules)
# - key = "value" for settings
# - # for comments
#
# Documentation: https://docs.netlify.com/configure-builds/file-based-configuration/
# ============================================


# ==========================================
# BUILD SETTINGS
# ==========================================
[build]
  # Publish directory â€” where the built site files are.
  # Since this is a static site (no build step), it's the root.
  publish = "."

  # No build command needed for a static HTML site.
  # If you later add a build tool (Hugo, 11ty, etc.),
  # you'd set the command here.
  # command = ""


# ==========================================
# CUSTOM HEADERS
# ==========================================
# Applied to all pages served by Netlify.
# These improve security, caching, and performance.

# ---- Security Headers (all pages) ----
[[headers]]
  for = "/*"
  [headers.values]
    # Prevent clickjacking â€” your site can't be embedded in iframes
    X-Frame-Options = "SAMEORIGIN"

    # Prevent MIME type sniffing â€” browser trusts declared content type
    X-Content-Type-Options = "nosniff"

    # Control referrer info sent with requests
    Referrer-Policy = "strict-origin-when-cross-origin"

    # Restrict browser features your site doesn't need
    Permissions-Policy = "camera=(), microphone=(), geolocation=(), interest-cohort=()"

    # Content Security Policy â€” controls what resources can load
    # ðŸ”§ CUSTOMIZE: If you add external scripts/fonts/images,
    #    you need to whitelist their domains here.
    Content-Security-Policy = "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://identity.netlify.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://*.netlify.com https://*.netlify.app; frame-src 'self' https://*.netlify.com;"

    # Strict Transport Security â€” force HTTPS for 1 year
    Strict-Transport-Security = "max-age=31536000; includeSubDomains; preload"


# ---- Caching for CSS files ----
[[headers]]
  for = "/css/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# ---- Caching for JavaScript files ----
[[headers]]
  for = "/js/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# ---- Caching for images ----
[[headers]]
  for = "/images/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# ---- Caching for fonts ----
[[headers]]
  for = "*.woff2"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# ---- Caching for JSON data (shorter cache â€” content changes more often) ----
[[headers]]
  for = "/data/*"
  [headers.values]
    Cache-Control = "public, max-age=3600, stale-while-revalidate=86400"

# ---- Service Worker â€” never cache the SW itself ----
[[headers]]
  for = "/sw.js"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"

# ---- Manifest â€” short cache ----
[[headers]]
  for = "/manifest.json"
  [headers.values]
    Cache-Control = "public, max-age=86400"


# ==========================================
# REDIRECTS & REWRITES
# ==========================================

# ---- Custom 404 page ----
# When a page isn't found, serve 404.html with a 404 status code.
[[redirects]]
  from = "/*"
  to = "/404.html"
  status = 404

# ---- Redirect www to non-www (if using custom domain) ----
# ðŸ”§ CUSTOMIZE: Uncomment and update if you have a custom domain
# [[redirects]]
#   from = "https://www.yourname.com/*"
#   to = "https://yourname.com/:splat"
#   status = 301
#   force = true


# ==========================================
# NETLIFY IDENTITY (for CMS)
# ==========================================
# Allow Identity widget to work on admin pages
[[headers]]
  for = "/admin/*"
  [headers.values]
    # Slightly relaxed CSP for admin panel (Decap CMS needs eval)
    Content-Security-Policy = "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://identity.netlify.com https://*.netlify.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com data:; img-src 'self' data: https: blob:; connect-src 'self' https://*.netlify.com https://*.netlify.app https://api.github.com; frame-src 'self' https://*.netlify.com;"


# ==========================================
# CONTEXT-SPECIFIC SETTINGS (optional)
# ==========================================
# Settings for deploy previews (branch deploys)
[context.deploy-preview]
  # You could add a robots noindex header here to prevent
  # preview deploys from being indexed by search engines
  [[context.deploy-preview.headers]]
    for = "/*"
    [context.deploy-preview.headers.values]
      X-Robots-Tag = "noindex, nofollow"
